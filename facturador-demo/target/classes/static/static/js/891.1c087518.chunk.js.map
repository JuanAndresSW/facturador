{"version":3,"file":"static/js/891.1c087518.chunk.js","mappings":"oQAee,SAASA,IAEtB,OAAmCC,EAAAA,EAAAA,UAAS,IAA5C,eAAOC,EAAP,KAAwBC,EAAxB,KACA,GAAgCF,EAAAA,EAAAA,UAAS,IAAzC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAA0BJ,EAAAA,EAAAA,UAAS,IAAnC,eAAOK,EAAP,KAAcC,EAAd,KACA,GAA8BN,EAAAA,EAAAA,WAAS,GAAvC,eAAOO,EAAP,KAAgBC,EAAhB,KAUA,SAASC,EAAYC,EAAYL,GAC/B,IAAKK,EAAI,OAAOJ,EAASD,GACzBC,EAAS,IAGX,OACE,UAAC,KAAD,CAAMK,SAdR,YACOC,EAAAA,EAAAA,MAAYX,IAAoBW,EAAAA,EAAAA,MAAYX,KAAqBW,EAAAA,EAAAA,SAAeT,IACnFK,GAAW,IACXK,EAAAA,EAAAA,GAASZ,EAAiBE,EAAUM,IAEjCH,EAAS,uCASUQ,MAAM,oBAA9B,WAEE,SAAC,KAAD,CAAOC,MAAM,SAAC,MAAD,IAAYC,MAAM,iCAA8BC,KAAM,CAAChB,EAAiBC,MACrF,SAAC,KAAD,CAAOa,MAAM,SAAC,MAAD,IAAWC,MAAM,gBAAaE,KAAK,WAAWD,KAAM,CAACd,EAAUC,MAE5E,SAAC,KAAD,CAASc,KAAK,QAAQC,QAASd,IAE9BE,GAAQ,SAAC,KAAD,KAAY,SAAC,KAAD,CAAQW,KAAK,SAASE,KAAK,cAEhD,cAAGC,KAAK,cAAcC,OAAO,SAASC,UAAU,OAAOC,MAAO,CAACC,eAAe,QAA9E,yCACA,eAAGD,MAAO,CAACE,UAAU,SAAUC,OAAO,WAAtC,UACG,8BACD,SAAC,KAAD,CAAMC,GAAG,cAAcJ,MAAO,CAACC,eAAe,QAA9C,oC,6EC5CO,SAASZ,EAASZ,EAAyBE,EAAkB0B,IACxEC,EAAAA,EAAAA,GAAK,OAAQ,aAAc,CACzBC,KAAMC,KAAKC,UAAU,CACnBhC,gBAAiBA,EAAgBiC,OACjC/B,SAAiBA,EAAS+B,WAI9B,SAAwBC,EAAmBC,GACvC,GAAkB,MAAdD,EAKA,OAJAE,aAAaC,SACbC,EAAAA,EAAAA,GAAWH,GACXP,GAAS,QACTW,OAAOC,SAASC,SAGpB,GAAkB,MAAdP,EAEA,YADAN,GAAS,EAAO,sCAGpBA,GAAS,EAAOO","sources":["pages/Login/Login.tsx","pages/Login/services/tryLogin.ts"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//Servicios.\r\nimport tryLogin from \"./services/tryLogin\";\r\n\r\n//Utilidades.\r\nimport Valid from \"utilities/Valid\";\r\n\r\n//Componentes de formulario.\r\nimport {Form, Field, Message, Button} from 'components/formComponents';\r\nimport { BiKey, BiUser } from \"react-icons/bi\";\r\nimport { Loading } from \"styledComponents\";\r\n\r\n/**Devuelve un formulario para iniciar sesión.*/\r\nexport default function Login(): JSX.Element {\r\n\r\n  const [usernameOrEmail, setUser] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  function submit(): void {\r\n    if ((Valid.names(usernameOrEmail) || Valid.email(usernameOrEmail)) && Valid.password(password)) {\r\n      setLoading(true);\r\n      tryLogin(usernameOrEmail, password, sideEffects);\r\n    }\r\n    else setError(\"Usuario o contraseña incorrecta\");\r\n  };\r\n\r\n  function sideEffects(ok:boolean, error:string):void {\r\n    if (!ok) return setError(error);\r\n    setError(\"\");\r\n  }\r\n\r\n  return (\r\n    <Form onSubmit={submit} title=\"Iniciar sesión\">\r\n\r\n      <Field icon={<BiUser />} label=\"Nombre o correo electrónico\" bind={[usernameOrEmail, setUser]} />\r\n      <Field icon={<BiKey />} label=\"Contraseña\" type=\"password\" bind={[password, setPassword]} />\r\n\r\n      <Message type=\"error\" message={error} />\r\n\r\n      {loading?<Loading />:<Button type=\"submit\" text=\"Ingresar\" />}\r\n\r\n      <a href=\"about:blank\" target=\"_blank\" className=\"link\" style={{textDecoration:'none'}}>Olvidé mi contraseña</a>\r\n      <p style={{textAlign:'center', cursor:'default'}}>\r\n        {'¿No tienes una cuenta? '}\r\n        <Link to=\"registrarse\" style={{textDecoration:'none'}}>Crea una nueva</Link>\r\n      </p>\r\n\r\n    </Form>\r\n  );\r\n}","import ajax from 'interceptors/ajax';\r\nimport setSession from 'services/setSession';\r\n\r\n/** Trata de iniciar sesión con los credenciales proporcionados.*/\r\nexport default function tryLogin(usernameOrEmail: string, password: string, callback: Function): void {\r\n    ajax(\"POST\", \"auth/login\", {\r\n      body: JSON.stringify({\r\n        usernameOrEmail: usernameOrEmail.trim(),\r\n        password:        password.trim(),\r\n      })\r\n    }, handleResponse);\r\n\r\n    function handleResponse(httpState: number, content: string): void {\r\n        if (httpState === 200) {\r\n            localStorage.clear();\r\n            setSession(content);\r\n            callback(true);\r\n            window.location.reload();\r\n            return;\r\n        }\r\n        if (httpState === 404) {\r\n            callback(false, \"Usuario o contraseña incorrecta\");\r\n            return;\r\n        }\r\n        callback(false, content);\r\n    }\r\n}"],"names":["Login","useState","usernameOrEmail","setUser","password","setPassword","error","setError","loading","setLoading","sideEffects","ok","onSubmit","Valid","tryLogin","title","icon","label","bind","type","message","text","href","target","className","style","textDecoration","textAlign","cursor","to","callback","ajax","body","JSON","stringify","trim","httpState","content","localStorage","clear","setSession","window","location","reload"],"sourceRoot":""}