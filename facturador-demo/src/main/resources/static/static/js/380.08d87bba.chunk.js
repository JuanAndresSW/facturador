"use strict";(self.webpackChunkfacturador_masmas=self.webpackChunkfacturador_masmas||[]).push([[380],{6364:function(e,t,n){n.d(t,{S:function(){return c},U:function(){return u}});var r=n(885),a=n(2791),s=n(7692),o=n(184);function u(e){var t=e.children,n=e.label,u=e.initial,c=void 0===u||u,i=e.sync,l=e.onClick,d=(0,a.useState)(c),f=(0,r.Z)(d,2),p=f[0],m=f[1],g=void 0===i?p:i;return(0,o.jsxs)("div",{className:g?"retractable":"retractable folded",children:[(0,o.jsxs)("div",{onClick:function(){m(!g),l&&l(!g)},children:[n,g?(0,o.jsx)(s.jRD,{}):(0,o.jsx)(s.OrA,{})]}),(0,o.jsx)("div",{children:t})]})}var c=function(e){var t=e.bool,n=e.children;return t?(0,o.jsx)(o.Fragment,{children:n}):null}},7991:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(5861),a=n(885),s=n(7757),o=n.n(s),u=n(2791),c=n(6871),i=n(5960);var l=n(2161),d=n(9245);function f(e){(0,d.Z)("GET","mainaccounts/".concat(sessionStorage.getItem("username")),{token:(0,l.Z)("access")},(function(t,n){200===t?e(!0,function(e){var t=JSON.parse(e);return{businessName:t.businessName,vatCategory:t.vatCategory,uniqueKey:t.uniqueKey}}(n)):e(!1,n)}))}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.t1=t.user.username,e.t2=t.user.newUsername?t.user.newUsername.trim():null,e.t3=t.user.password?t.user.password.trim():null,e.t4=t.user.newPassword?t.user.newPassword.trim():null,e.next=7,(0,i.sT)(t.user.newAvatar);case 7:return e.t5=e.sent,e.t6={username:e.t1,newUsername:e.t2,password:e.t3,newPassword:e.t4,newAvatar:e.t5},e.t7={newBusinessName:t.trader.newBusinessName?t.trader.newBusinessName.trim():null,newVatCategory:t.trader.newVatCategory?t.trader.newVatCategory.trim():null,newCode:t.trader.newCode?(0,i.bL)(t.trader.newCode):null},e.t8={user:e.t6,trader:e.t7},e.abrupt("return",e.t0.stringify.call(e.t0,e.t8));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.Z,e.next=3,p(t);case 3:e.t1=e.sent,e.t2=(0,l.Z)("access"),e.t3={body:e.t1,token:e.t2},e.t4=function(e,t){return b(e,t,n)},(0,e.t0)("PUT","mainaccounts",e.t3,e.t4);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.Z,e.next=3,p(t);case 3:e.t1=e.sent,e.t2=(0,l.Z)("access"),e.t3={body:e.t1,token:e.t2},e.t4=function(e,t){return b(e,t,n)},(0,e.t0)("PUT","auth/branchaccounts",e.t3,e.t4);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n){200===e?(localStorage.removeItem("avatar"),n(!0)):n(!1,t)}var v=n(4112),x=n(6344),Z=n(6364),h=n(7428),S=n(7692),y=n(184),j="MAIN"===sessionStorage.getItem("role"),C=j?function(e,t){return function(e,t){return g.apply(this,arguments)}(e,t)}:function(e,t){return function(e,t){return w.apply(this,arguments)}(e,t)};function N(){var e=(0,c.s0)(),t=(0,u.useState)(!1),n=(0,a.Z)(t,2),s=n[0],p=n[1],m=(0,u.useState)(!1),g=(0,a.Z)(m,2),w=g[0],b=g[1],N=(0,u.useState)(!1),k=(0,a.Z)(N,2),I=k[0],U=k[1],A=(0,u.useState)(""),E=(0,a.Z)(A,2),L=E[0],P=E[1],T=(0,u.useState)(""),z=(0,a.Z)(T,2),B=z[0],D=z[1],O=(0,u.useState)(!1),R=(0,a.Z)(O,2),F=R[0],J=R[1],M=(0,u.useState)(""),V=(0,a.Z)(M,2),q=V[0],K=V[1],_=(0,u.useState)(void 0),G=(0,a.Z)(_,2),H=G[0],Y=G[1],$=(0,u.useState)(""),Q=(0,a.Z)($,2),W=Q[0],X=Q[1],ee=(0,u.useState)(""),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],ae=(0,u.useState)(""),se=(0,a.Z)(ae,2),oe=se[0],ue=se[1],ce=(0,u.useState)(""),ie=(0,a.Z)(ce,2),le=ie[0],de=ie[1],fe=(0,u.useState)(""),pe=(0,a.Z)(fe,2),me=pe[0],ge=pe[1],we=(0,u.useState)(""),be=(0,a.Z)(we,2),ve=be[0],xe=be[1],Ze=(0,u.useState)(""),he=(0,a.Z)(Ze,2),Se=he[0],ye=he[1],je=(0,u.useState)(""),Ce=(0,a.Z)(je,2),Ne=Ce[0],ke=Ce[1],Ie=(0,u.useState)(""),Ue=(0,a.Z)(Ie,2),Ae=Ue[0],Ee=Ue[1],Le=(0,u.useState)(""),Pe=(0,a.Z)(Le,2),Te=Pe[0],ze=Pe[1];function Be(){return(Be=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),t={user:{username:sessionStorage.getItem("username"),newUsername:W,password:ne,newPassword:oe,newAvatar:H},trader:{newBusinessName:ve,newVatCategory:Ne,newCode:Te}},C(t,(function(e,t){p(!1),e?(b(!0),W&&sessionStorage.setItem("username",W)):P(t)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.useEffect)((function(){!function(e){function t(){return(t=(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Jr)(localStorage.getItem("avatar").slice(22));case 2:n=t.sent,e(!0,n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}localStorage.getItem("avatar")?function(){t.apply(this,arguments)}():e(!1)}((function(e,t){e&&!H&&Y(t)})),j&&f((function(e,t){e?(ge(t.businessName),ye(t.vatCategory),Ee(t.uniqueKey)):P(t)}))}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(x.l0,{title:"Opciones de la cuenta",onSubmit:function(){if(v.Z.image(H,P)&&(!W||v.Z.names(W,P))){if(v.Z.password(ne)){if(!v.Z.password(oe,P))return;if(oe!==le)return P("Las contrase\xf1as no coinciden")}if(j){if(ve&&!v.Z.names(ve))return P("La raz\xf3n social debe ser de entre 3 y 20 caracteres");if(Ne&&!v.Z.vatCategory(Ne))return P("Seleccione una categor\xeda");if(Te&&!v.Z.code(Ae))return P("C.U.I.".concat("Monotributista"===Ne?"L. inv\xe1lido":"T. inv\xe1lida"))}!function(){Be.apply(this,arguments)}()}},children:[(0,y.jsx)(S.gbs,{onClick:function(){return e("/inicio")},style:{margin:"1rem",fontSize:"2rem",color:"rgb(44,44,44)",cursor:"pointer"}}),(0,y.jsx)(x.Ee,{label:"",setter:Y,img:H}),(0,y.jsx)(x.gN,{bind:[W,X],label:"Nombre",placeholder:sessionStorage.getItem("username")}),(0,y.jsx)(x.gN,{bind:[ne,re],label:"Para cambiar tu contrase\xf1a, introduce la contrase\xf1a actual:",type:"password"}),v.Z.password(ne)?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.gN,{bind:[oe,ue],label:"Nueva contrase\xf1a",type:"password"}),(0,y.jsx)(x.gN,{bind:[le,de],label:"Confirmar nueva contrase\xf1a",type:"password"})]}):null,j?(0,y.jsxs)(h.$0,{label:"Datos del comercio",children:[(0,y.jsx)(x.gN,{bind:[ve,xe],label:"Raz\xf3n social",placeholder:me}),(0,y.jsx)(x.Y8,{legend:"Actualmente: "+Se+". Nueva categor\xeda:",bind:[Ne,ke],options:["Responsable Inscripto","Monotributista","Sujeto Exento"]}),(0,y.jsx)(x.gN,{label:"C.U.I."+("Monotributista"===Ne?"L. ":"T. "),bind:[Te,ze],placeholder:Ae})]}):null,(0,y.jsx)(x.v0,{type:"error",message:L}),w?(0,y.jsx)(x.v0,{type:"success",message:"Se han guardado los cambios"}):s?(0,y.jsx)(h.gb,{}):(0,y.jsx)(x.zx,{text:"Confirmar cambios",type:"submit"}),(0,y.jsx)("p",{style:{textAlign:"center",color:"#fff",cursor:"default"},children:"..."}),(0,y.jsxs)(Z.U,{label:"Otras opciones",initial:!1,children:[F?(0,y.jsx)(x.gN,{bind:[q,K],label:"Se ha enviado por correo electr\xf3nico el c\xf3digo de eliminaci\xf3n. Escr\xedbelo a continuaci\xf3n para confirmar:"}):null,(0,y.jsx)(x.v0,{type:"error",message:B}),I?(0,y.jsx)(x.v0,{type:"success",message:"Se ha eliminado la cuenta"}):s?(0,y.jsx)(h.gb,{}):(0,y.jsx)(x.zx,{type:"delete",text:F?"Solicitar c\xf3digo para eliminar cuenta":"Borrar la cuenta",onClick:F?function(){var e;p(!0),e=function(e,t){p(!1),e?J(!0):D(t)},(0,d.Z)("HEAD","mainaccounts",{token:(0,l.Z)("access")},(function(t,n){200===t?e(!0):e(!1,n)}))}:function(){var e;e=function(e,t){e?U(!0):D(t)},(0,d.Z)("DELETE","mainaccounts/".concat(sessionStorage.getItem("username")),{token:(0,l.Z)("access")},(function(t,n){200===t?(localStorage.clear(),sessionStorage.clear(),e(!0)):e(!1,n)}))}}),"  "]})]})})}},5960:function(e,t,n){n.d(t,{sT:function(){return o},Jr:function(){return u},bL:function(){return c}});var r=n(5861),a=n(7757),s=n.n(a),o=function(e){return new Promise((function(t,n){var r=new FileReader;e?(r.onerror=n,r.onload=function(){return t(r.result)},r.readAsDataURL(e)):t(void 0)}))},u=function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("data:image/jpeg;base64,".concat(t));case 2:return n=e.sent,e.next=5,n.blob();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){var t=e.replace(/ |\.|-/g,"");return t?t.slice(0,2)+"-"+t.slice(2,4)+"."+t.slice(4,7)+"."+t.slice(7,10)+"-"+t.charAt(10):""}}}]);
//# sourceMappingURL=380.08d87bba.chunk.js.map