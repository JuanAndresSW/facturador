"use strict";(self.webpackChunkfacturador_masmas=self.webpackChunkfacturador_masmas||[]).push([[402],{7368:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var n=r(5861),a=r(885),s=r(7757),u=r.n(s),o=r(2791),i=r(6871),c=r(8994),l=r(1034);function d(){return f.apply(this,arguments)}function f(){return(f=(0,n.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)("DELETE","accounts/".concat(sessionStorage.getItem("username")),!0);case 2:return 204===(t=e.sent).status&&(0,l.Z)(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=r(9548),v=r(5960);function m(){return(m=(0,n.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("avatar")){e.next=5;break}return e.next=3,(0,v.Jr)(localStorage.getItem("avatar"));case 3:return t=e.sent,e.abrupt("return",new p.Z("",t,200));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=r(1413);function b(e){var t=JSON.parse(e);return{businessName:t.businessName,VATCategory:t.vatCategory,CUIT:t.cuit}}function y(){return(y=(0,n.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)("GET","accounts/".concat(sessionStorage.getItem("username")),!0);case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",(0,g.Z)((0,g.Z)({},t),{},{content:b(t.content)}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return w.apply(this,arguments)}function w(){return(w=(0,n.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=JSON,e.t1=sessionStorage.getItem("username"),e.t2=t.user.updatedUsername?t.user.updatedUsername.trim():null,e.t3=t.user.password?t.user.password.trim():null,e.t4=t.user.updatedPassword?t.user.updatedPassword.trim():null,!t.user.updatedAvatar){e.next=11;break}return e.next=8,(0,v.sT)(t.user.updatedAvatar);case 8:e.t5=e.sent,e.next=12;break;case 11:e.t5="undefined";case 12:return e.t6=e.t5,e.t7={username:e.t1,updatedUsername:e.t2,password:e.t3,updatedPassword:e.t4,updatedAvatar:e.t6},e.t8={updatedBusinessName:t.trader.updatedBusinessName?t.trader.updatedBusinessName.trim():null,updatedVatCategory:t.trader.updatedVATCategory?t.trader.updatedVATCategory.trim():null},e.t9={user:e.t7,trader:e.t8},e.abrupt("return",e.t0.stringify.call(e.t0,e.t9));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,n.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c.Z,e.next=3,h(t);case 3:return e.t1=e.sent,e.next=6,(0,e.t0)("PUT","accounts",!0,e.t1);case 6:return 204===(r=e.sent).status&&localStorage.removeItem("avatar"),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=r(4112),S=r(5070),j=r(5584),I=r(4953),C=r(7692),O=r(184);function N(){var e=(0,i.s0)(),t=(0,o.useState)(!1),r=(0,a.Z)(t,2),s=r[0],c=r[1],l=(0,o.useState)(!1),f=(0,a.Z)(l,2),p=f[0],v=f[1],g=(0,o.useState)(!1),b=(0,a.Z)(g,2),h=b[0],w=b[1],Z=(0,o.useState)(""),N=(0,a.Z)(Z,2),P=N[0],T=N[1],A=(0,o.useState)(""),U=(0,a.Z)(A,2),E=U[0],z=U[1],$=(0,o.useState)(void 0),D=(0,a.Z)($,2),L=D[0],R=D[1],B=(0,o.useState)(""),V=(0,a.Z)(B,2),F=V[0],J=V[1],M=(0,o.useState)(""),_=(0,a.Z)(M,2),q=_[0],G=_[1],H=(0,o.useState)(""),X=(0,a.Z)(H,2),Y=X[0],K=X[1],Q=(0,o.useState)(""),W=(0,a.Z)(Q,2),ee=W[0],te=W[1],re=(0,o.useState)(""),ne=(0,a.Z)(re,2),ae=ne[0],se=ne[1],ue=(0,o.useState)(""),oe=(0,a.Z)(ue,2),ie=oe[0],ce=oe[1],le=(0,o.useState)(""),de=(0,a.Z)(le,2),fe=de[0],pe=de[1],ve=(0,o.useState)(""),me=(0,a.Z)(ve,2),ge=me[0],be=me[1],ye=(0,o.useState)(""),he=(0,a.Z)(ye,2),we=he[0],xe=he[1];function Ze(){return(Ze=(0,n.Z)(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t={user:{updatedUsername:F,password:q,updatedPassword:Y,updatedAvatar:L},trader:{updatedBusinessName:ie,updatedVATCategory:ge}},e.next=4,x(t);case 4:if((r=e.sent).ok){e.next=7;break}return e.abrupt("return",T(r.message));case 7:v(!0),F&&sessionStorage.setItem("username",F);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=(0,n.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:(t=e.sent).ok?w(!0):z(t.message);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){(function(){return m.apply(this,arguments)})().then((function(e){e.ok&&!L&&R(e.content)})),function(){return y.apply(this,arguments)}().then((function(e){if(!e.ok)return T(e.message);var t=e.content;se(t.businessName),pe(t.VATCategory),xe(t.CUIT)}))})),(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(S.l0,{title:"Opciones de la cuenta",onSubmit:function(){if(k.Z.image(L,T)&&(!F||k.Z.names(F,T))){if(k.Z.password(q)){if(!k.Z.password(Y,T))return;if(Y!==ee)return T("Las contrase\xf1as no coinciden")}if(ie&&!k.Z.names(ie))return T("La raz\xf3n social debe ser de entre 3 y 20 caracteres");ge&&!k.Z.vatCategory(ge,T)||function(){Ze.apply(this,arguments)}()}},children:[(0,O.jsx)(C.gbs,{onClick:function(){return e("/inicio")},style:{margin:"1rem",fontSize:"2rem",color:"rgb(44,44,44)",cursor:"pointer"}}),(0,O.jsx)(S.Ee,{label:"",setter:R,img:L}),(0,O.jsx)(S.gN,{bind:[F,J],label:"Nombre",placeholder:sessionStorage.getItem("username"),validator:k.Z.names(F)}),(0,O.jsx)(S.gN,{bind:[q,G],type:"password",label:"Para cambiar tu contrase\xf1a, introduce la contrase\xf1a actual:",validator:k.Z.password(q)}),k.Z.password(q)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(S.gN,{bind:[Y,K],label:"Nueva contrase\xf1a",type:"password",validator:k.Z.password(Y)}),(0,O.jsx)(S.gN,{bind:[ee,te],label:"Confirmar nueva contrase\xf1a",type:"password",validator:ee===Y})]}):null,(0,O.jsxs)(I.$0,{label:"Datos del comercio",children:[(0,O.jsxs)("p",{style:{textAlign:"center",cursor:"default"},children:["C.U.I.T.: ",we]}),(0,O.jsx)(S.gN,{bind:[ie,ce],label:"Raz\xf3n social",placeholder:ae,validator:k.Z.names(ie)}),(0,O.jsx)(S.Y8,{legend:"Actualmente: "+fe+". Nueva categor\xeda:",bind:[ge,be],options:["Responsable Inscripto","Responsable Monotributista"]})]}),(0,O.jsx)(S.v0,{type:"error",message:P}),p?(0,O.jsx)(S.v0,{type:"success",message:"Se han guardado los cambios"}):s?(0,O.jsx)(j.gb,{}):(0,O.jsx)(S.zx,{type:"submit",children:"Confirmar cambios"}),(0,O.jsx)("p",{style:{textAlign:"center",color:"#fff",cursor:"default"},children:"..."}),(0,O.jsxs)(I.UI,{label:"Otras opciones",initial:!1,children:[(0,O.jsx)(S.v0,{type:"error",message:E}),h?(0,O.jsx)(S.v0,{type:"success",message:"Se ha eliminado la cuenta"}):s?(0,O.jsx)(j.gb,{}):(0,O.jsx)(I.c_,{justify:"space-between",children:(0,O.jsx)(I.I4,{label:"\xbfEst\xe1 seguro de que quiere eliminar su cuenta? Esta acci\xf3n es irreversible",onConfirm:function(){return ke.apply(this,arguments)},children:(0,O.jsx)(S.zx,{type:"delete",children:"Borrar la cuenta"})})})]})]})})}},1034:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(7762);function a(){var e,t=(0,n.Z)(document.cookie.split(";"));try{for(t.s();!(e=t.n()).done;){var r=e.value;document.cookie=r+"=; Secure; path=/; expires="+new Date(0).toUTCString()}}catch(a){t.e(a)}finally{t.f()}localStorage.clear(),window.location.reload()}},4112:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(5671),a=r(3144),s=function(){function e(){(0,n.Z)(this,e)}return(0,a.Z)(e,null,[{key:"names",value:function(e,t){return(null===e||void 0===e?void 0:e.trim().length)<=20&&e.trim().length>=3||(t&&t("El nombre debe ser de entre 3 y 20 caracteres"),!1)}},{key:"email",value:function(e,t){return!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||(t&&t("Ingrese una direcci\xf3n v\xe1lida de email"),!1)}},{key:"password",value:function(e,t){return(null===e||void 0===e?void 0:e.length)<=40&&e.length>=8||(t&&t("La contrase\xf1a debe ser de entre 8 y 40 caracteres"),!1)}},{key:"image",value:function(e,t){return!e||((null===e||void 0===e?void 0:e.size)<2097152||(t&&t("La im\xe1gen no debe superar los 2MB"),!1))}},{key:"CUIT",value:function(e,t){var r;return e=null===(r=e)||void 0===r?void 0:r.replace(/ |\.|-/g,""),!!/^[0-9]{2}[1-9][0-9]{7}[0-9]$/.test(e)||(t&&t("Ingrese una clave v\xe1lida"),!1)}},{key:"sellConditions",value:function(e,t){return!0}},{key:"vatCategory",value:function(e,t){return"Responsable Monotributista"===e||"Responsable Inscripto"===e||"Consumidor Final"===e||"Sujeto Exento"===e||(t&&t("Seleccione una categor\xeda"),!1)}},{key:"address",value:function(e){return(null===e||void 0===e?void 0:e.length)<=40&&e.length>=4}},{key:"postalCode",value:function(e,t){return!!/^\d{4}$/.test(e)||(t&&t("Ingrese un c\xf3digo postal de 4 d\xedgitos"),!1)}},{key:"phone",value:function(e,t){var r,n;return 0===(null===(n=e=null===(r=e)||void 0===r?void 0:r.replace(/ |\.|-/g,""))||void 0===n?void 0:n.trim().length)||(!!/^\d{10}$/.test(e)||(t&&t("Ingrese un n\xfamero telef\xf3nico de 10 d\xedgitos"),!1))}},{key:"website",value:function(e,t){if(0===(null===e||void 0===e?void 0:e.trim().length))return!0;return!!/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)||(t&&t("Ingrese un URL v\xe1lido"),!1)}},{key:"addressNumber",value:function(e,t){return!e||(!!/^[1-9]{1}\d{0,4}$/.test(null===e||void 0===e?void 0:e.toLocaleString())||(t&&t("Ingrese un n\xfamero de direcci\xf3n"),!1))}},{key:"addressHeight",value:function(e,t){return!!/^[-]?\d{1,3}$/.test(e)||(t&&t("Ingrese una altura v\xe1lida"),!1)}},{key:"hexColor",value:function(e,t){return!!/^#[\da-f]{6}$/.test(e)||(t&&t("Ingrese un color v\xe1lido."),!1)}},{key:"date",value:function(e,t){return!!/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/.test(e)||(t&&t("Ingrese una fecha v\xe1lida."),!1)}}]),e}()},5960:function(e,t,r){r.d(t,{sT:function(){return u},Jr:function(){return o},XG:function(){return c},kf:function(){return l}});var n=r(5861),a=r(7757),s=r.n(a),u=function(e){return new Promise((function(t,r){var n=new FileReader;if(!e)return t(void 0);n.onerror=r,n.onload=function(){return t(n.result+"")},n.readAsDataURL(e)}))};function o(e){return i.apply(this,arguments)}function i(){return(i=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e){var t=e.replace(/ |\.|-/g,"");return t?t.slice(0,2)+"-"+t.slice(2,4)+"."+t.slice(4,7)+"."+t.slice(7,10)+"-"+t.charAt(10):""};function l(e){switch(e.toString().length){case 1:return"000"+e;case 2:return"00"+e;case 3:return"0"+e;default:return e.toString().slice(0,e.toString().length-4)}}},4942:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},1413:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(4942);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}}}]);
//# sourceMappingURL=402.928c6111.chunk.js.map