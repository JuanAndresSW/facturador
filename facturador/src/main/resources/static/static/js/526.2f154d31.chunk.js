"use strict";(self.webpackChunkfacturador_masmas=self.webpackChunkfacturador_masmas||[]).push([[526],{9954:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(5861),a=n(885),s=n(7757),u=n.n(s),i=n(2791),o=n(3504),c=n(5070),l=n(5584),d=n(4953),f=n(7692),v=n(4112),p=n(5960);function g(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.t1=t.user.username.trim(),e.t2=t.user.email.trim(),e.t3=t.user.password.trim(),e.next=6,(0,p.sT)(t.user.avatar);case 6:return e.t4=e.sent,e.t5=""+e.t4,e.t6={username:e.t1,email:e.t2,password:e.t3,avatar:e.t5},e.t7={businessName:t.trader.businessName.trim(),vatCategory:t.trader.VATCategory.trim(),cuit:(0,p.XG)(t.trader.CUIT)},e.t8={user:e.t6,trader:e.t7},e.abrupt("return",e.t0.stringify.call(e.t0,e.t8));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=n(8994),h=n(8156),y="auth/accounts",x="POST";function w(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b.Z,e.t1=x,e.t2=y,e.next=5,g(t);case 5:return e.t3=e.sent,e.next=8,(0,e.t0)(e.t1,e.t2,!1,e.t3);case 8:return 201===(n=e.sent).status&&((0,h.Z)(JSON.stringify({accessToken:JSON.parse(n.content).accessToken,refreshToken:JSON.parse(n.content).refreshToken,username:t.user.username})),window.location.reload()),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(184);function S(){var e=(0,i.useState)("user"),t=(0,a.Z)(e,2),n=t[0],s=t[1],p=(0,i.useState)(!1),g=(0,a.Z)(p,2),m=g[0],b=g[1],h=(0,i.useState)(!1),y=(0,a.Z)(h,2),x=y[0],Z=y[1],S=(0,i.useState)(""),j=(0,a.Z)(S,2),C=j[0],I=j[1],T=(0,i.useState)(""),N=(0,a.Z)(T,2),z=N[0],U=N[1],$=(0,i.useState)(""),L=(0,a.Z)($,2),R=L[0],E=L[1],O=(0,i.useState)(),A=(0,a.Z)(O,2),J=A[0],_=A[1],q=(0,i.useState)(""),D=(0,a.Z)(q,2),F=D[0],M=D[1],V=(0,i.useState)(""),G=(0,a.Z)(V,2),P=G[0],X=G[1],B=(0,i.useState)(""),H=(0,a.Z)(B,2),K=H[0],Y=H[1],Q=(0,i.useState)(""),W=(0,a.Z)(Q,2),ee=W[0],te=W[1],ne=(0,i.useState)(""),re=(0,a.Z)(ne,2),ae=re[0],se=re[1],ue=(0,i.useState)(""),ie=(0,a.Z)(ue,2),oe=ie[0],ce=ie[1];function le(){return(le=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={user:{username:C,email:z,password:R,avatar:J},trader:{businessName:K,VATCategory:ee,CUIT:ae}},b(!0),e.next=4,w(t);case 4:if(n=e.sent,b(!1),n.ok){e.next=8;break}return e.abrupt("return",ce(n.message));case 8:Z(!0),ce(""),window.location.reload();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return"user"===n?(0,k.jsxs)(c.l0,{title:"Datos de la cuenta",onSubmit:function(){X(""),v.Z.names(C,X)&&v.Z.email(z,X)&&v.Z.password(R,X)&&(R!==F?(X("Las contrase\xf1as no coinciden"),0):v.Z.image(J,X))&&s("trader")},children:[(0,k.jsx)(o.rU,{to:"/",children:(0,k.jsx)(f.OKt,{})}),(0,k.jsx)(c.gN,{label:"\xbfC\xf3mo quieres que te identifiquemos?",bind:[C,I],validator:v.Z.names(C)}),(0,k.jsx)(c.gN,{label:"Tu direcci\xf3n de correo electr\xf3nico",bind:[z,U],validator:v.Z.email(z)}),(0,k.jsxs)(d.c_,{children:[(0,k.jsx)(c.gN,{label:"Elige una contrase\xf1a",bind:[R,E],type:"password",validator:v.Z.password(R)}),(0,k.jsx)(c.gN,{label:"Vuelve a escribir la contrase\xf1a",bind:[F,M],type:"password",validator:R===F})]}),(0,k.jsx)(c.Ee,{label:"Foto de perfil",note:"(opcional)",setter:_,img:J}),(0,k.jsx)(c.v0,{type:"error",message:P}),(0,k.jsxs)(d.c_,{justify:"space-between",children:[(0,k.jsx)(o.rU,{to:"/ingresar",children:"Acceder"}),(0,k.jsx)(c.zx,{type:"submit",children:"Siguiente"})]})]}):"trader"===n?(0,k.jsxs)(c.l0,{title:"Datos del comercio",onSubmit:function(){ce(""),(v.Z.names(K)?v.Z.vatCategory(ee,ce)&&v.Z.CUIT(ae,ce):(ce("La raz\xf3n social debe ser de entre 3 y 20 caracteres"),0))&&function(){le.apply(this,arguments)}()},children:[m?null:(0,k.jsx)(f.gbs,{onClick:function(){return s("user")}}),(0,k.jsx)(c.gN,{label:"Escribe tu raz\xf3n social",bind:[K,Y],validator:v.Z.names(K)}),(0,k.jsx)(c.Y8,{legend:"Selecciona una categor\xeda:",bind:[ee,te],options:["Responsable Inscripto","Responsable Monotributista"]}),(0,k.jsx)(c.gN,{label:"C.U.I.T.",bind:[ae,se],validator:v.Z.CUIT(ae)}),(0,k.jsx)(c.v0,{type:"error",message:oe}),x?(0,k.jsx)(c.v0,{type:"success",message:'Se ha creado la cuenta "'.concat(z,'"')}):m?(0,k.jsx)(l.gb,{}):(0,k.jsx)(c.zx,{type:"submit",children:"Enviar"})]}):null}},4112:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(5671),a=n(3144),s=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,null,[{key:"names",value:function(e,t){return(null===e||void 0===e?void 0:e.trim().length)<=20&&e.trim().length>=3||(t&&t("El nombre debe ser de entre 3 y 20 caracteres"),!1)}},{key:"email",value:function(e,t){return!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||(t&&t("Ingrese una direcci\xf3n v\xe1lida de email"),!1)}},{key:"password",value:function(e,t){return(null===e||void 0===e?void 0:e.length)<=40&&e.length>=8||(t&&t("La contrase\xf1a debe ser de entre 8 y 40 caracteres"),!1)}},{key:"image",value:function(e,t){return!e||((null===e||void 0===e?void 0:e.size)<2097152||(t&&t("La im\xe1gen no debe superar los 2MB"),!1))}},{key:"CUIT",value:function(e,t){var n;return e=null===(n=e)||void 0===n?void 0:n.replace(/ |\.|-/g,""),!!/^[0-9]{2}[1-9][0-9]{7}[0-9]$/.test(e)||(t&&t("Ingrese una clave v\xe1lida"),!1)}},{key:"sellConditions",value:function(e,t){return!0}},{key:"vatCategory",value:function(e,t){return"Responsable Monotributista"===e||"Responsable Inscripto"===e||"Consumidor Final"===e||"Sujeto Exento"===e||(t&&t("Seleccione una categor\xeda"),!1)}},{key:"address",value:function(e){return(null===e||void 0===e?void 0:e.length)<=40&&e.length>=4}},{key:"postalCode",value:function(e,t){return!!/^\d{4}$/.test(e)||(t&&t("Ingrese un c\xf3digo postal de 4 d\xedgitos"),!1)}},{key:"phone",value:function(e,t){var n,r;return 0===(null===(r=e=null===(n=e)||void 0===n?void 0:n.replace(/ |\.|-/g,""))||void 0===r?void 0:r.trim().length)||(!!/^\d{10}$/.test(e)||(t&&t("Ingrese un n\xfamero telef\xf3nico de 10 d\xedgitos"),!1))}},{key:"website",value:function(e,t){if(0===(null===e||void 0===e?void 0:e.trim().length))return!0;return!!/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)||(t&&t("Ingrese un URL v\xe1lido"),!1)}},{key:"addressNumber",value:function(e,t){return!e||(!!/^[1-9]{1}\d{0,4}$/.test(null===e||void 0===e?void 0:e.toLocaleString())||(t&&t("Ingrese un n\xfamero de direcci\xf3n"),!1))}},{key:"addressHeight",value:function(e,t){return!!/^[-]?\d{1,3}$/.test(e)||(t&&t("Ingrese una altura v\xe1lida"),!1)}},{key:"hexColor",value:function(e,t){return!!/^#[\da-f]{6}$/.test(e)||(t&&t("Ingrese un color v\xe1lido."),!1)}},{key:"date",value:function(e,t){return!!/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/.test(e)||(t&&t("Ingrese una fecha v\xe1lida."),!1)}}]),e}()},5960:function(e,t,n){n.d(t,{sT:function(){return u},Jr:function(){return i},XG:function(){return c},kf:function(){return l}});var r=n(5861),a=n(7757),s=n.n(a),u=function(e){return new Promise((function(t,n){var r=new FileReader;if(!e)return t(void 0);r.onerror=n,r.onload=function(){return t(r.result+"")},r.readAsDataURL(e)}))};function i(e){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e){var t=e.replace(/ |\.|-/g,"");return t?t.slice(0,2)+"-"+t.slice(2,4)+"."+t.slice(4,7)+"."+t.slice(7,10)+"-"+t.charAt(10):""};function l(e){switch(e.toString().length){case 1:return"000"+e;case 2:return"00"+e;case 3:return"0"+e;default:return e.toString().slice(0,e.toString().length-4)}}}}]);
//# sourceMappingURL=526.2f154d31.chunk.js.map